/*! jQuery.classy() - v0.0.1 - 2012-12-14
* Copyright (c) 2012 Adam Coulombe; Licensed MIT, GPL */
(function(b){var a=b.fn.bind;b.fn.bind=function(){arguments[0]=b.extendEventPrefixes(arguments[0]);var d=a.apply(this,arguments);return d};var c=b.fn.unbind;b.fn.unbind=function(){arguments[0]=b.extendEventPrefixes(arguments[0]);var d=c.apply(this,arguments);return d};b.extend({extendEventPrefixes:function(d){if(typeof d==="string"){browserVendorPrefix=b.getBrowserVendorPrefix();d=d.replace("transitionend","transitionend "+browserVendorPrefix+"TransitionEnd");d=d.replace("animationstart","animationstart "+browserVendorPrefix+"AnimationStart");d=d.replace("animationiteration","animationiteration "+browserVendorPrefix+"AnimationIteration");d=d.replace("animationend","animationend "+browserVendorPrefix+"AnimationEnd")}return d},getBrowserVendorPrefix:function(g){var e=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/;var d=document.getElementsByTagName("script")[0];for(var f in d.style){if(e.test(f)){prefix=f.match(e)[0].toLowerCase();if(!g){if(prefix=="ms"){prefix="MS"}if(prefix=="moz"){prefix="Moz"}}return prefix}}if("WebkitOpacity" in d.style){return"webkit"}if("KhtmlOpacity" in d.style){return"khtml"}return""},classy:{apply:function(f,e,d){if(typeof e.add=="string"){f.addClass(e.add)}if(typeof e.remove=="string"){f.removeClass(e.remove)}if(typeof e.call=="function"){e.call(d)}},map:function(f,g,d){if(typeof d.add=="string"||typeof d.remove=="string"||typeof d.call=="function"){$elData=f.data();var h=function(e){console.log(e);if(!d.eventPersist){f.unbind(g)}else{if(!f.data("classy-"+g+"-persist")){f.data("classy-"+g+"-persist",g)}}b.classy.apply(f,d,g,e)};if(!d.eventPersist||!f.data("classy-"+g+"-persist")){f.bind(g,h)}}}}});b.fn.extend({classy:function(){var d={};var i=null;if(typeof arguments[0]==="string"){d={add:arguments[0],end:{}}}else{if(typeof arguments[0]==="object"){d=arguments[0];d.end=arguments[0].end||{};i=d.end.call}}if(typeof arguments[1]==="function"){if(i){d.end.call=function(){i();arguments[1]()}}else{d.end.call=arguments[1]}}else{if(arguments[2]&&typeof arguments[1]==="function"){if(i){d.end.call=function(){i();arguments[2]()}}else{d.end.call=arguments[2]}}if(typeof arguments[1]==="object"){if(d.end.add||d.end.remove||d.end.call){d.end.add=d.end.add?d.end.add+arguments[1].add:arguments[1].add;d.end.remove=d.end.remove?d.end.remove+arguments[1].remove:arguments[1].remove;if(typeof d.end.call==="function"&&typeof arguments[1].call==="function"){var g=d.end.call;var e=arguments[1].call;var f=function(j){e(j);g(j)};d.end.call=f}}else{d.end=arguments[1]}}}var h={add:null,remove:null,call:null,start:{add:null,remove:null,call:null,eventPersist:null},end:{add:null,remove:null,call:null,eventPersist:null},iteration:{add:null,remove:null,call:null,eventPersist:true},type:null};var d=b.extend(h,d);return this.each(function(){var k=b(this);if(!d.type){if(parseFloat(k.css("-"+b.getBrowserVendorPrefix()+"-transition-duration"))>0||parseFloat(k.css("transition-duration"))>0){d.type="transition"}else{d.type="animation"}}var l=d.type+"end";if(typeof d.add=="string"||typeof d.remove=="string"||typeof d.call=="function"){var j=function(){b.classy.apply(k,d)};j()}b.classy.map(k,l,d.end);if(d.type=="animation"){b.classy.map(k,"animationstart",d.start);b.classy.map(k,"animationiteration",d.iteration)}})}})})(jQuery);